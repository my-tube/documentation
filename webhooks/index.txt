1:"$Sreact.fragment"
3:I[9766,[],""]
4:I[8924,[],""]
5:I[8825,["619","static/chunks/619-f09bc47e24909021.js","201","static/chunks/201-b64cb77138e69909.js","834","static/chunks/834-7e8b1b5bf1d9ca93.js","837","static/chunks/app/webhooks/page-2f18c17a7d4f7a37.js"],"Heading"]
6:I[2619,["619","static/chunks/619-f09bc47e24909021.js","201","static/chunks/201-b64cb77138e69909.js","834","static/chunks/834-7e8b1b5bf1d9ca93.js","837","static/chunks/app/webhooks/page-2f18c17a7d4f7a37.js"],""]
7:I[1282,["619","static/chunks/619-f09bc47e24909021.js","201","static/chunks/201-b64cb77138e69909.js","834","static/chunks/834-7e8b1b5bf1d9ca93.js","837","static/chunks/app/webhooks/page-2f18c17a7d4f7a37.js"],"Code"]
8:I[1282,["619","static/chunks/619-f09bc47e24909021.js","201","static/chunks/201-b64cb77138e69909.js","834","static/chunks/834-7e8b1b5bf1d9ca93.js","837","static/chunks/app/webhooks/page-2f18c17a7d4f7a37.js"],"Pre"]
16:I[7150,[],""]
:HL["/_next/static/css/d9ef10af6a9feef6.css","style"]
9:T6e0,<span><span style="color: var(--shiki-color-text)">{</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;id&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;a056V7R7NmNRjl70&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;type&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;conversation.updated&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;payload&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;id&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;WAz8eIbvDR60rouK&quot;</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// ...</span></span>
<span><span style="color: var(--shiki-color-text)">  }</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span>0:{"P":null,"b":"DaPZfN1d1cSmUjcfqBCqI","p":"","c":["","webhooks",""],"i":false,"f":[[["",{"children":["webhooks",{"children":["__PAGE__",{}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/d9ef10af6a9feef6.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],"$L2"]}],{"children":["webhooks",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":[["$","article",null,{"className":"flex h-full flex-col pt-16 pb-10","children":["$","div",null,{"className":"flex-auto prose dark:prose-invert [html_:where(&>*)]:mx-auto [html_:where(&>*)]:max-w-2xl lg:[html_:where(&>*)]:mx-[calc(50%-min(50%,var(--container-lg)))] lg:[html_:where(&>*)]:max-w-3xl","children":[["$","h1",null,{"children":"Webhooks"}],"\n",["$","p",null,{"children":"In this guide, we will look at how to register and consume webhooks to integrate your app with Protocol. With webhooks, your app can know when something happens in Protocol, such as someone sending a message or adding a contact.","className":"lead"}],"\n",["$","$L5",null,{"level":2,"id":"registering-webhooks","children":"Registering webhooks"}],"\n",["$","p",null,{"children":["To register a new webhook, you need to have a URL in your app that Protocol can call. You can configure a new webhook from the Protocol dashboard under ",["$","$L6",null,{"href":"#","children":"API settings"}],". Give your webhook a name, pick the ",["$","$L6",null,{"href":"#event-types","children":"events"}]," you want to listen for, and add your URL."]}],"\n",["$","p",null,{"children":"Now, whenever something of interest happens in your app, a webhook is fired off by Protocol. In the next section, we'll look at how to consume webhooks."}],"\n",["$","$L5",null,{"level":2,"id":"consuming-webhooks","children":"Consuming webhooks"}],"\n",["$","p",null,{"language":"txt","children":["When your app receives a webhook request from Protocol, check the ",["$","$L7",null,{"children":"type"}]," attribute to see what event caused it. The first part of the event type will tell you the payload type, e.g., a conversation, message, etc."]}],"\n",["$","$L8",null,{"language":"json","code":"{\n  \"id\": \"a056V7R7NmNRjl70\",\n  \"type\": \"conversation.updated\",\n  \"payload\": {\n    \"id\": \"WAz8eIbvDR60rouK\"\n    // ...\n  }\n}\n","children":["$","$L7",null,{"className":"language-json","children":"$9"}],"title":"Example webhook payload"}],"\n","$La","\n","$Lb","\n","$Lc","\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13"]}]}],null,"$L14"]}],{},null,false]},null,false]},null,false],"$L15",false]],"m":"$undefined","G":["$16",[]],"s":false,"S":true}
21:I[1282,["619","static/chunks/619-f09bc47e24909021.js","201","static/chunks/201-b64cb77138e69909.js","834","static/chunks/834-7e8b1b5bf1d9ca93.js","837","static/chunks/app/webhooks/page-2f18c17a7d4f7a37.js"],"CodeGroup"]
25:I[4431,[],"OutletBoundary"]
27:I[5278,[],"AsyncMetadataOutlet"]
29:I[4431,[],"ViewportBoundary"]
2b:I[4431,[],"MetadataBoundary"]
2c:"$Sreact.suspense"
a:["$","p",null,{"language":"txt","children":["In the example above, a conversation was ",["$","$L7",null,{"children":"updated"}],", and the payload type is a ",["$","$L7",null,{"children":"conversation"}],"."]}]
b:["$","div",null,{"className":"not-prose","children":["$","$L6",null,{"className":"inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition text-emerald-500 hover:text-emerald-600 dark:text-emerald-400 dark:hover:text-emerald-500","href":"#event-types","children":[false,"See all event types",["$","svg",null,{"viewBox":"0 0 20 20","fill":"none","aria-hidden":"true","className":"mt-0.5 h-5 w-5 relative top-px -mr-1","children":["$","path",null,{"stroke":"currentColor","strokeLinecap":"round","strokeLinejoin":"round","d":"m11.5 6.5 3 3.5m0 0-3 3.5m3-3.5h-9"}]}]]}]}]
c:["$","hr",null,{}]
d:["$","$L5",null,{"level":2,"id":"event-types","children":"Event types"}]
e:["$","div",null,{"className":"grid grid-cols-1 items-start gap-x-16 gap-y-10 xl:max-w-none xl:grid-cols-2","children":[["$","div",null,{"className":"[&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","div",null,{"className":"my-6","children":["$","ul",null,{"role":"list","className":"m-0 max-w-[calc(var(--container-lg)-(--spacing(8)))] list-none divide-y divide-zinc-900/5 p-0 dark:divide-white/5","children":[["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"contact.created"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"A new contact was created."}]}]]}]}],["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"contact.updated"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"An existing contact was updated."}]}]]}]}],["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"contact.deleted"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"A contact was successfully deleted."}]}]]}]}],["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"conversation.created"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"A new conversation was created."}]}]]}]}],["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"conversation.updated"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"An existing conversation was updated."}]}]]}]}],["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"conversation.deleted"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"A conversation was successfully deleted."}]}]]}]}],["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"message.created"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"A new message was created."}]}]]}]}],["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"message.updated"}]}],"$undefined","$L17","$L18"]}]}],"$L19","$L1a","$L1b","$L1c","$L1d","$L1e","$L1f"]}]}]}],"$L20"]}]
f:["$","hr",null,{}]
10:["$","$L5",null,{"level":2,"id":"security","children":"Security"}]
11:["$","p",null,{"language":"txt","children":["To know for sure that a webhook was, in fact, sent by Protocol instead of a malicious actor, you can verify the request signature. Each webhook request contains a header named ",["$","$L7",null,{"children":"x-protocol-signature"}],", and you can verify this signature by using your secret webhook key. The signature is an HMAC hash of the request payload hashed using your secret key. Here is an example of how to verify the signature in your app:"]}]
22:T9f9,<span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">signature</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">req</span><span style="color: var(--shiki-color-text)">.headers[</span><span style="color: var(--shiki-token-string-expression)">&#39;x-protocol-signature&#39;</span><span style="color: var(--shiki-color-text)">]</span></span>
<span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">hash</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">crypto</span><span style="color: var(--shiki-token-function)">.createHmac</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;sha256&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> secret)</span><span style="color: var(--shiki-token-function)">.update</span><span style="color: var(--shiki-color-text)">(payload)</span><span style="color: var(--shiki-token-function)">.digest</span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;hex&#39;</span><span style="color: var(--shiki-color-text)">)</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (hash </span><span style="color: var(--shiki-token-keyword)">===</span><span style="color: var(--shiki-color-text)"> signature) {</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// Request is verified</span></span>
<span><span style="color: var(--shiki-color-text)">} </span><span style="color: var(--shiki-token-keyword)">else</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// Request could not be verified</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span>12:["$","$L21",null,{"title":"Verifying a request","children":[["$","$L8",null,{"language":"js","code":"const signature = req.headers['x-protocol-signature']\nconst hash = crypto.createHmac('sha256', secret).update(payload).digest('hex')\n\nif (hash === signature) {\n  // Request is verified\n} else {\n  // Request could not be verified\n}\n","children":["$","$L7",null,{"className":"language-js","children":"$22"}]}],["$","$L8",null,{"language":"python","code":"from flask import request\nimport hashlib\nimport hmac\n\nsignature = request.headers.get(\"x-protocol-signature\")\nhash = hmac.new(bytes(secret, \"ascii\"), bytes(payload, \"ascii\"), hashlib.sha256)\n\nif hash.hexdigest() == signature:\n    # Request is verified\nelse:\n    # Request could not be verified\n","children":"$L23"}],"$L24"]}]
13:["$","p",null,{"language":"txt","children":["If your generated signature matches the ",["$","$L7",null,{"children":"x-protocol-signature"}]," header, you can be sure that the request was truly coming from Protocol. It's essential to keep your secret webhook key safe — otherwise, you can no longer be sure that a given webhook was sent by Protocol. Don't commit your secret webhook key to GitHub!"]}]
14:["$","$L25",null,{"children":["$L26",["$","$L27",null,{"promise":"$@28"}]]}]
15:["$","$1","h",{"children":[null,[["$","$L29",null,{"children":"$L2a"}],null],["$","$L2b",null,{"children":["$","div",null,{"hidden":true,"children":["$","$2c",null,{"fallback":null,"children":"$L2d"}]}]}]]}]
17:["$","dt",null,{"className":"sr-only","children":"Description"}]
18:["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"An existing message was updated."}]}]
19:["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"message.deleted"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"A message was successfully deleted."}]}]]}]}]
1a:["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"group.created"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"A new group was created."}]}]]}]}]
1b:["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"group.updated"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"An existing group was updated."}]}]]}]}]
1c:["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"group.deleted"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"A group was successfully deleted."}]}]]}]}]
1d:["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"attachment.created"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"A new attachment was created."}]}]]}]}]
1e:["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"attachment.updated"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"An existing attachment was updated."}]}]]}]}]
1f:["$","li",null,{"className":"m-0 px-0 py-4 first:pt-0 last:pb-0","children":["$","dl",null,{"className":"m-0 flex flex-wrap items-center gap-x-3 gap-y-2","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"children":["$","code",null,{"children":"attachment.deleted"}]}],"$undefined",["$","dt",null,{"className":"sr-only","children":"Description"}],["$","dd",null,{"className":"w-full flex-none [&>:first-child]:mt-0 [&>:last-child]:mb-0","children":["$","p",null,{"children":"An attachment was successfully deleted."}]}]]}]}]
2e:T1bad,<span><span style="color: var(--shiki-color-text)">{</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;id&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;a056V7R7NmNRjl70&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;type&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;message.updated&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">&quot;payload&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;id&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;SIuAFUNKdSYHZF2w&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;conversation_id&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;xgQQXg3hrtjh7AvZ&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;contact&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">&quot;id&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;WAz8eIbvDR60rouK&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">&quot;username&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;KevinMcCallister&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">&quot;phone_number&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;1-800-759-3000&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">&quot;avatar_url&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;https://assets.protocol.chat/avatars/kevin.jpg&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">&quot;last_active_at&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">705103200</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-keyword)">&quot;created_at&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">692233200</span></span>
<span><span style="color: var(--shiki-color-text)">    }</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;message&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&quot;I’m traveling with my dad. He’s at a meeting. I hate meetings.&quot;</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;reactions&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> []</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;attachments&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> []</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;read_at&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">705103200</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;created_at&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">692233200</span><span style="color: var(--shiki-token-punctuation)">,</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">&quot;updated_at&quot;</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">692233200</span></span>
<span><span style="color: var(--shiki-color-text)">  }</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span>20:["$","div",null,{"className":"[&>:first-child]:mt-0 [&>:last-child]:mb-0 xl:sticky xl:top-24","children":["$","$L8",null,{"language":"json","code":"{\n  \"id\": \"a056V7R7NmNRjl70\",\n  \"type\": \"message.updated\",\n  \"payload\": {\n    \"id\": \"SIuAFUNKdSYHZF2w\",\n    \"conversation_id\": \"xgQQXg3hrtjh7AvZ\",\n    \"contact\": {\n      \"id\": \"WAz8eIbvDR60rouK\",\n      \"username\": \"KevinMcCallister\",\n      \"phone_number\": \"1-800-759-3000\",\n      \"avatar_url\": \"https://assets.protocol.chat/avatars/kevin.jpg\",\n      \"last_active_at\": 705103200,\n      \"created_at\": 692233200\n    },\n    \"message\": \"I’m traveling with my dad. He’s at a meeting. I hate meetings.\",\n    \"reactions\": [],\n    \"attachments\": [],\n    \"read_at\": 705103200,\n    \"created_at\": 692233200,\n    \"updated_at\": 692233200\n  }\n}\n","children":["$","$L7",null,{"className":"language-json","children":"$2e"}],"title":"Example payload"}]}]
2f:Tc9a,<span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> flask </span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> request</span></span>
<span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> hashlib</span></span>
<span><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> hmac</span></span>
<span></span>
<span><span style="color: var(--shiki-color-text)">signature </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> request</span><span style="color: var(--shiki-token-punctuation)">.</span><span style="color: var(--shiki-color-text)">headers</span><span style="color: var(--shiki-token-punctuation)">.</span><span style="color: var(--shiki-token-function)">get</span><span style="color: var(--shiki-token-punctuation)">(</span><span style="color: var(--shiki-token-string-expression)">&quot;x-protocol-signature&quot;</span><span style="color: var(--shiki-token-punctuation)">)</span></span>
<span><span style="color: var(--shiki-token-function)">hash</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> hmac</span><span style="color: var(--shiki-token-punctuation)">.</span><span style="color: var(--shiki-token-function)">new</span><span style="color: var(--shiki-token-punctuation)">(</span><span style="color: var(--shiki-token-constant)">bytes</span><span style="color: var(--shiki-token-punctuation)">(secret, </span><span style="color: var(--shiki-token-string-expression)">&quot;ascii&quot;</span><span style="color: var(--shiki-token-punctuation)">), </span><span style="color: var(--shiki-token-constant)">bytes</span><span style="color: var(--shiki-token-punctuation)">(payload, </span><span style="color: var(--shiki-token-string-expression)">&quot;ascii&quot;</span><span style="color: var(--shiki-token-punctuation)">), hashlib.sha256)</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">hash</span><span style="color: var(--shiki-token-punctuation)">.</span><span style="color: var(--shiki-token-function)">hexdigest</span><span style="color: var(--shiki-token-punctuation)">()</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">==</span><span style="color: var(--shiki-color-text)"> signature</span><span style="color: var(--shiki-token-punctuation)">:</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)"># Request is verified</span></span>
<span><span style="color: var(--shiki-token-keyword)">else</span><span style="color: var(--shiki-token-punctuation)">:</span></span>
<span><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)"># Request could not be verified</span></span>
<span></span>23:["$","$L7",null,{"className":"language-python","children":"$2f"}]
30:T937,<span><span style="color: var(--shiki-color-text)">$signature </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> $request[</span><span style="color: var(--shiki-token-string-expression)">&#39;headers&#39;</span><span style="color: var(--shiki-color-text)">][</span><span style="color: var(--shiki-token-string-expression)">&#39;x-protocol-signature&#39;</span><span style="color: var(--shiki-color-text)">];</span></span>
<span><span style="color: var(--shiki-color-text)">$hash </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)">hash_hmac</span><span style="color: var(--shiki-token-punctuation)">(</span><span style="color: var(--shiki-token-string-expression)">&#39;sha256&#39;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-token-function)"> $payload</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-token-function)"> $secret</span><span style="color: var(--shiki-token-punctuation)">)</span><span style="color: var(--shiki-color-text)">;</span></span>
<span></span>
<span><span style="color: var(--shiki-token-keyword)">if</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-function)">hash_equals</span><span style="color: var(--shiki-token-punctuation)">(</span><span style="color: var(--shiki-token-function)">$hash</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-token-function)"> $signature</span><span style="color: var(--shiki-token-punctuation)">)</span><span style="color: var(--shiki-color-text)">) {</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// Request is verified</span></span>
<span><span style="color: var(--shiki-color-text)">} </span><span style="color: var(--shiki-token-keyword)">else</span><span style="color: var(--shiki-color-text)"> {</span></span>
<span><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// Request could not be verified</span></span>
<span><span style="color: var(--shiki-color-text)">}</span></span>
<span></span>24:["$","$L8",null,{"language":"php","code":"$$signature = $request['headers']['x-protocol-signature'];\n$hash = hash_hmac('sha256', $payload, $secret);\n\nif (hash_equals($hash, $signature)) {\n  // Request is verified\n} else {\n  // Request could not be verified\n}\n","children":["$","$L7",null,{"className":"language-php","children":"$30"}]}]
2a:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
26:null
31:I[622,[],"IconMark"]
28:{"metadata":[["$","title","0",{"children":"Webhooks | MyTube Documentation"}],["$","meta","1",{"name":"description","content":"In this guide, we will look at how to register and consume webhooks to integrate your app with Protocol."}],["$","meta","2",{"property":"og:title","content":"Webhooks | MyTube Documentation"}],["$","meta","3",{"property":"og:description","content":"In this guide, we will look at how to register and consume webhooks to integrate your app with Protocol."}],["$","meta","4",{"property":"og:image","content":"https://mytube.dev/public/android-chrome-512x512.png"}],["$","meta","5",{"name":"twitter:card","content":"summary"}],["$","meta","6",{"name":"twitter:title","content":"Webhooks | MyTube Documentation"}],["$","meta","7",{"name":"twitter:description","content":"In this guide, we will look at how to register and consume webhooks to integrate your app with Protocol."}],["$","meta","8",{"name":"twitter:image","content":"https://mytube.dev/public/android-chrome-512x512.png"}],["$","link","9",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","$L31","10",{}]],"error":null,"digest":"$undefined"}
2d:"$28:metadata"
32:I[6300,["619","static/chunks/619-f09bc47e24909021.js","201","static/chunks/201-b64cb77138e69909.js","484","static/chunks/484-8a2b8b6d444aa2e3.js","356","static/chunks/356-e0bd228f139e0ecd.js","423","static/chunks/423-044465f7d74e21d7.js","834","static/chunks/834-7e8b1b5bf1d9ca93.js","177","static/chunks/app/layout-813acd675cefcd5c.js"],"Providers"]
33:I[5298,["619","static/chunks/619-f09bc47e24909021.js","201","static/chunks/201-b64cb77138e69909.js","484","static/chunks/484-8a2b8b6d444aa2e3.js","356","static/chunks/356-e0bd228f139e0ecd.js","423","static/chunks/423-044465f7d74e21d7.js","834","static/chunks/834-7e8b1b5bf1d9ca93.js","177","static/chunks/app/layout-813acd675cefcd5c.js"],"Layout"]
2:["$","html",null,{"lang":"en","className":"h-full","suppressHydrationWarning":true,"children":["$","body",null,{"className":"flex min-h-full bg-white antialiased dark:bg-zinc-900","children":["$","$L32",null,{"children":["$","div",null,{"className":"w-full","children":["$","$L33",null,{"allSections":{"/":[{"title":"Guides","id":"guides"},{"title":"Resources","id":"resources"}],"/attachments":[{"title":"The attachment model","id":"the-attachment-model"},{"title":"List all attachments","id":"list-all-attachments","tag":"GET","label":"/v1/attachments"},{"title":"Create an attachment","id":"create-an-attachment","tag":"POST","label":"/v1/attachments"},{"title":"Retrieve an attachment","id":"retrieve-an-attachment","tag":"GET","label":"/v1/attachments/:id"},{"title":"Update an attachment","id":"update-an-attachment","tag":"PUT","label":"/v1/attachments/:id"},{"title":"Delete an attachment","id":"delete-an-attachment","tag":"DELETE","label":"/v1/attachments/:id"}],"/authentication":[{"title":"Basic authentication","id":"basic-authentication"},{"title":"OAuth2 with bearer token","id":"o-auth2-with-bearer-token"},{"title":"Using an SDK","id":"using-an-sdk"}],"/errors":[{"title":"Status codes","id":"status-codes"},{"title":"Error types","id":"error-types"}],"/groups":[{"title":"The group model","id":"the-group-model"},{"title":"List all groups","id":"list-all-groups","tag":"GET","label":"/v1/groups"},{"title":"Create a group","id":"create-a-group","tag":"POST","label":"/v1/groups"},{"title":"Retrieve a group","id":"retrieve-a-group","tag":"GET","label":"/v1/groups/:id"},{"title":"Update a group","id":"update-a-group","tag":"PUT","label":"/v1/groups/:id"},{"title":"Delete a group","id":"delete-a-group","tag":"DELETE","label":"/v1/groups/:id"}],"/conversations":[{"title":"The conversation model","id":"the-conversation-model"},{"title":"List all conversations","id":"list-all-conversations","tag":"GET","label":"/v1/conversations"},{"title":"Create a conversation","id":"create-a-conversation","tag":"POST","label":"/v1/conversations"},{"title":"Retrieve a conversation","id":"retrieve-a-conversation","tag":"GET","label":"/v1/conversations/:id"},{"title":"Update a conversation","id":"update-a-conversation","tag":"PUT","label":"/v1/conversations/:id"},{"title":"Delete a conversation","id":"delete-a-conversation","tag":"DELETE","label":"/v1/conversations/:id"}],"/contacts":[{"title":"The contact model","id":"the-contact-model"},{"title":"List all contacts","id":"list-all-contacts","tag":"GET","label":"/v1/contacts"},{"title":"Create a contact","id":"create-a-contact","tag":"POST","label":"/v1/contacts"},{"title":"Retrieve a contact","id":"retrieve-a-contact","tag":"GET","label":"/v1/contacts/:id"},{"title":"Update a contact","id":"update-a-contact","tag":"PUT","label":"/v1/contacts/:id"},{"title":"Delete a contact","id":"delete-a-contact","tag":"DELETE","label":"/v1/contacts/:id"}],"/messages":[{"title":"The message model","id":"the-message-model"},{"title":"List all messages","id":"list-all-messages","tag":"GET","label":"/v1/messages"},{"title":"Send a message","id":"send-a-message","tag":"POST","label":"/v1/messages"},{"title":"Retrieve a message","id":"retrieve-a-message","tag":"GET","label":"/v1/messages/:id"},{"title":"Update a message","id":"update-a-message","tag":"PUT","label":"/v1/messages/:id"},{"title":"Delete a message","id":"delete-a-message","tag":"DELETE","label":"/v1/messages/:id"}],"/pagination":[{"title":"Example using cursors","id":"example-using-cursors"}],"/quickstart":[{"title":"Choose your client","id":"choose-your-client"},{"title":"Making your first API request","id":"making-your-first-api-request"},{"title":"What's next?","id":"whats-next"}],"/sdks":[{"title":"Official libraries","id":"official-libraries"}],"/webhooks":[{"title":"Registering webhooks","id":"registering-webhooks"},{"title":"Consuming webhooks","id":"consuming-webhooks"},{"title":"Event types","id":"event-types"},{"title":"Security","id":"security"}]},"children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","div",null,{"className":"absolute inset-0 -z-10 mx-0 max-w-none overflow-hidden","children":["$","div",null,{"className":"absolute top-0 left-1/2 -ml-152 h-100 w-325 dark:mask-[linear-gradient(white,transparent)]","children":["$L34","$L35"]}]}],"$L36"],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]}]}]}]
34:["$","div",null,{"className":"absolute inset-0 bg-linear-to-r from-[#36b49f] to-[#DBFF75] mask-[radial-gradient(farthest-side_at_top,white,transparent)] opacity-40 dark:from-[#36b49f]/30 dark:to-[#DBFF75]/30 dark:opacity-100","children":["$","svg",null,{"aria-hidden":"true","className":"absolute inset-x-0 inset-y-[-50%] h-[200%] w-full skew-y-[-18deg] fill-black/40 stroke-black/50 mix-blend-overlay dark:fill-white/2.5 dark:stroke-white/5","children":[["$","defs",null,{"children":["$","pattern",null,{"id":"_S_1_","width":72,"height":56,"patternUnits":"userSpaceOnUse","x":-12,"y":4,"children":["$","path",null,{"d":"M.5 56V.5H72","fill":"none"}]}]}],["$","rect",null,{"width":"100%","height":"100%","strokeWidth":0,"fill":"url(#_S_1_)"}],["$","svg",null,{"x":-12,"y":4,"className":"overflow-visible","children":[["$","rect","4-3",{"strokeWidth":"0","width":73,"height":57,"x":288,"y":168}],["$","rect","2-1",{"strokeWidth":"0","width":73,"height":57,"x":144,"y":56}],["$","rect","7-3",{"strokeWidth":"0","width":73,"height":57,"x":504,"y":168}],["$","rect","10-6",{"strokeWidth":"0","width":73,"height":57,"x":720,"y":336}]]}]]}]}]
35:["$","svg",null,{"viewBox":"0 0 1113 440","aria-hidden":"true","className":"absolute top-0 left-1/2 -ml-76 w-278.25 fill-white blur-[26px] dark:hidden","children":["$","path",null,{"d":"M.016 439.5s-9.5-300 434-300S882.516 20 882.516 20V0h230.004v439.5H.016Z"}]}]
36:["$","div",null,{"className":"mx-auto flex h-full max-w-xl flex-col items-center justify-center py-16 text-center","children":[["$","p",null,{"className":"text-sm font-semibold text-zinc-900 dark:text-white","children":"404"}],["$","h1",null,{"className":"mt-2 text-2xl font-bold text-zinc-900 dark:text-white","children":"Page not found"}],["$","p",null,{"className":"mt-2 text-base text-zinc-600 dark:text-zinc-400","children":"Sorry, we couldn’t find the page you’re looking for."}],["$","$L6",null,{"className":"inline-flex gap-0.5 justify-center overflow-hidden text-sm font-medium transition rounded-full bg-zinc-900 py-1 px-3 text-white hover:bg-zinc-700 dark:bg-emerald-400/10 dark:text-emerald-400 dark:ring-1 dark:ring-inset dark:ring-emerald-400/20 dark:hover:bg-emerald-400/10 dark:hover:text-emerald-300 dark:hover:ring-emerald-300 mt-8","href":"/","children":[false,"Back to docs",["$","svg",null,{"viewBox":"0 0 20 20","fill":"none","aria-hidden":"true","className":"mt-0.5 h-5 w-5 -mr-1","children":["$","path",null,{"stroke":"currentColor","strokeLinecap":"round","strokeLinejoin":"round","d":"m11.5 6.5 3 3.5m0 0-3 3.5m3-3.5h-9"}]}]]}]]}]
